<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IQ-Core | QA Analytics Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="page">
    <aside class="sidebar">
      <div class="logo-area">
        <div class="logo-block">
          <div class="logo-icon">IQ</div>
          <div class="logo-text">
            <div class="logo-title">IQ-Core</div>
            <div class="logo-sub">QA Analytics</div>
          </div>
        </div>
      </div>
      <nav class="nav">
        <a class="nav-item active" href="#">
          <span>Dashboard</span>
        </a>
        <a class="nav-item" href="agents.html">
          <span>Agents</span>
        </a>
      </nav>
    </aside>

    <div class="main">
      <header class="topbar">
        <div class="user">
          <div class="avatar">JM</div>
          <div class="user-meta">
            <div class="user-name">John Manager</div>
            <div class="user-role">QA Supervisor</div>
          </div>
        </div>
      </header>

      <div class="content">
        <div class="page-header">
          <div>
            <h1>Stanley | Weekly Call Quality Insights</h1>
          </div>
          <div class="actions">
            <button class="btn ghost">Dec 10, 2025 - Dec 17, 2025</button>
            <button class="btn ghost">Refresh</button>
            <button class="btn ghost">Export</button>
          </div>
        </div>

        <section class="card summary-card">
          <div class="card-header">
            <h2>Campaign Summary</h2>
          </div>
          <div class="summary-body">
            <p>Over the past week, Stanley’s customer support calls showed strong opportunities to improve both customer experience and operational efficiency. Calls where agents closely followed Stanley’s recommended troubleshooting processes led to significantly higher resolution rates and reduced repeat contacts.</p>
            <p>The analysis also revealed that proactive resolution actions—such as offering replacement lids or parts during the first interaction—had a meaningful impact on lowering repeat calls and improving customer confidence.</p>
            <p>From a customer satisfaction perspective, clarity and personalization emerged as key drivers. Customers responded more positively when agents demonstrated clear product context (specific Stanley products owned) and set clear expectations around next steps and delivery timelines.</p>
            <p>Overall, this week’s insights indicate that tighter process adherence and more decisive resolution behaviors directly translate into better customer outcomes for Stanley.</p>
          </div>
        </section>

        <section class="card insights-section">
          <h2>CSAT × Outcome Diagnostic Matrix</h2>
          
          <div class="matrix-container">
            <div class="matrix-table">
              <div class="matrix-header">
                <div class="matrix-cell header-cell"></div>
                <div class="matrix-cell header-cell header-positive">Positive<br><span class="header-sub">(8-10)</span></div>
                <div class="matrix-cell header-cell header-neutral">Neutral<br><span class="header-sub">(5-7)</span></div>
                <div class="matrix-cell header-cell header-negative">Negative<br><span class="header-sub">(&lt;5)</span></div>
              </div>
              <div class="matrix-row">
                <div class="matrix-cell row-label">Resolution Achieved<br>+ Process Followed</div>
                <div class="matrix-cell" data-csat="positive" data-resolution="achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-1">18%</span>
                </div>
                <div class="matrix-cell" data-csat="neutral" data-resolution="achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-2">8%</span>
                </div>
                <div class="matrix-cell" data-csat="negative" data-resolution="achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-3">5%</span>
                </div>
              </div>
              <div class="matrix-row">
                <div class="matrix-cell row-label">Resolution Not Achieved<br>+ Process Followed</div>
                <div class="matrix-cell" data-csat="positive" data-resolution="not_achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-4">6%</span>
                </div>
                <div class="matrix-cell" data-csat="neutral" data-resolution="not_achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-5">7%</span>
                </div>
                <div class="matrix-cell" data-csat="negative" data-resolution="not_achieved" data-process="followed">
                  <span class="cell-percentage" id="cell-6">12%</span>
                </div>
              </div>
              <div class="matrix-row">
                <div class="matrix-cell row-label">Resolution Achieved<br>+ Process Not Followed</div>
                <div class="matrix-cell" data-csat="positive" data-resolution="achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-7">15%</span>
                </div>
                <div class="matrix-cell" data-csat="neutral" data-resolution="achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-8">6%</span>
                </div>
                <div class="matrix-cell" data-csat="negative" data-resolution="achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-9">4%</span>
                </div>
              </div>
              <div class="matrix-row">
                <div class="matrix-cell row-label">Resolution Not Achieved<br>+ Process Not Followed</div>
                <div class="matrix-cell" data-csat="positive" data-resolution="not_achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-10">2%</span>
                </div>
                <div class="matrix-cell" data-csat="neutral" data-resolution="not_achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-11">3%</span>
                </div>
                <div class="matrix-cell" data-csat="negative" data-resolution="not_achieved" data-process="not_followed">
                  <span class="cell-percentage" id="cell-12">14%</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Matrix Stats Modal -->
        <div id="diagnosticModal" class="modal">
          <div class="modal-content">
            <div class="modal-header">
              <h2 id="modalTitle">Matrix Cell Details</h2>
              <button class="modal-close" id="closeDiagnosticModal">&times;</button>
            </div>
            <div class="modal-body">
              <div id="diagnosticSection" class="diagnostic-content">
                <!-- Stats content will be rendered here -->
              </div>
            </div>
          </div>
        </div>

        <section class="stats">
          <div class="stat-card">
            <p class="stat-label">Process Adherence Rate</p>
            <p class="stat-value">25% <span class="arrow up">▲</span></p>
          </div>
          <div class="stat-card">
            <p class="stat-label">Call Resolution Rate</p>
            <p class="stat-value">35% <span class="arrow down">▼</span></p>
          </div>
          <div class="stat-card">
            <p class="stat-label">CSAT Score</p>
            <p class="stat-value">20% <span class="arrow down">▼</span></p>
          </div>
        </section>

        <section class="card chart-section">
          <h2>Performance Trends</h2>
          <div class="chart-shell">
            <canvas id="trendChartCanvas" class="chart"></canvas>
            <div class="chart-legend">
              <span><span class="dot blue"></span>Process Adherence Rate</span>
              <span><span class="dot green"></span>Call Resolution Rate</span>
              <span><span class="dot yellow"></span>CSAT Score</span>
            </div>
          </div>
        </section>

        <section class="card insights-section">
          <h2>Process Adherence Insights</h2>
          <div class="insight-grid">
            <article class="insight-card">
              <h3>SOP adherence in lid-related calls improves resolution</h3>
              <p class="insight-text">Calls where agents followed the recommended lid troubleshooting SOP saw a 25% higher resolution rate compared to calls where steps were skipped.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>Analysis of call transcripts shows that customers frequently expressed confusion around lid alignment, sealing pressure, or locking mechanisms on Stanley bottles when agents skipped intermediate diagnostic steps. Phrases such as “I’m not sure if the lid is supposed to click like this” or “It still feels loose even after tightening” appeared repeatedly in unresolved calls. When agents walked customers through the full SOP—including visual checks and confirmation steps—customers demonstrated clearer understanding and confidence, leading to faster and more durable resolutions.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Reinforce lid SOP adherence in agent training</li>
                  <li>Introduce a step-by-step checklist within the agent workflow</li>
                </ul>
              </div>
            </article>

            <article class="insight-card">
              <h3>Missing resolution confirmation negatively impacts CSAT</h3>
              <p class="insight-text">Calls without a clear confirmation step at the end showed a 15% drop in CSAT.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>In calls lacking a structured wrap-up, customers often sought reassurance that the issue with their Stanley mug or lid was fully resolved. Statements like “So this shouldn’t happen again, right?” or “I just want to be sure this fixes it” appeared frequently. Without an explicit confirmation, customers left the call uncertain, which translated into lower satisfaction even when the technical solution was correct.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Enforce a mandatory resolution confirmation step</li>
                  <li>Add automated prompts before call closure</li>
                </ul>
              </div>
            </article>
          </div>
        </section>

        <section class="card insights-section">
          <h2>Resolution Insights</h2>
          <div class="insight-grid">
            <article class="insight-card">
              <h3>Structured handle troubleshooting reduces resolution time</h3>
              <p class="insight-text">Following the Stanley handle-specific troubleshooting flow reduced average resolution time by 35%.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>Customers calling about loose or unstable handles often described symptoms inconsistently, using phrases like “It wobbles when I lift it” or “It doesn’t feel secure when full”. Agents who deviated from the structured diagnostic flow tended to focus on surface fixes, missing underlying attachment or tightening issues. In contrast, agents who followed the full handle SOP were able to identify the root mechanical issue earlier, shortening call duration and avoiding repeat explanations.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Provide a digital handle troubleshooting flowchart</li>
                  <li>Embed guided diagnostics into the agent interface</li>
                </ul>
              </div>
            </article>

            <article class="insight-card">
              <h3>Proactive replacement offers reduce repeat calls</h3>
              <p class="insight-text">Offering replacement lids or parts during the first interaction reduced repeat calls by 50%.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>Customers expressed strong relief and confidence when agents proactively offered replacements, often saying things like “That’s a huge relief, I was worried I’d have to keep calling” or “I’m glad you’re just sending a new lid.” In contrast, calls that ended with monitoring advice or deferred actions frequently resulted in customers calling back after continued issues, even if the initial guidance was technically correct.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Empower agents to authorize replacements instantly</li>
                  <li>Auto-flag replacement-eligible issues</li>
                </ul>
              </div>
            </article>
          </div>
        </section>

        <section class="card insights-section">
          <h2>CSAT Insights</h2>
          <div class="insight-grid">
            <article class="insight-card">
              <h3>Personalized support improves customer satisfaction</h3>
              <p class="insight-text">CSAT improved by 18% when agents tailored solutions using the customer’s Stanley purchase history.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>Customers responded more positively when agents demonstrated awareness of the exact Stanley product being used (e.g., specific bottle size or lid type). Statements such as “Oh yes, it’s the 40oz Quencher” or “That makes sense for this model” signaled alignment and trust. Calls lacking this context often involved repeated clarification and frustration, lowering perceived service quality.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Integrate CRM purchase history into agent view</li>
                  <li>Prompt agents with product-specific guidance</li>
                </ul>
              </div>
            </article>

            <article class="insight-card">
              <h3>Clear delivery timelines increase CSAT</h3>
              <p class="insight-text">CSAT improved by 12% when agents provided a clear timeline for replacement delivery.</p>
              <div class="insight-block">
                <p class="block-title">Root Cause</p>
                <p>Uncertainty around delivery timing was a recurring source of dissatisfaction. Customers frequently asked “When exactly should I expect it?” or “Will it arrive before my trip?”. Calls where agents could confidently communicate delivery windows showed higher satisfaction and fewer follow-up contacts compared to vague or non-committal responses.</p>
              </div>
              <div class="insight-block">
                <p class="block-title">Next Best Actions</p>
                <ul>
                  <li>Provide real-time shipping ETA visibility</li>
                  <li>Auto-suggest delivery timelines during calls</li>
                </ul>
              </div>
            </article>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    (function () {
      const dates = ['Jul 8','Jul 10','Jul 12','Jul 14','Jul 16','Jul 18','Jul 20','Jul 22','Jul 24','Jul 26','Jul 28','Jul 30','Aug 1','Aug 5'];
      const adherence = [82, 82, 81, 84, 79, 80, 82, 83, 83, 84, 85, 84, 85, 86];
      const resolution = [63, 62, 63, 64, 62, 61, 62, 63, 62, 63, 64, 63, 64, 65];
      const csat = [34, 36, 33, 32, 34, 30, 31, 32, 35, 33, 36, 34, 36, 35];

      const ctx = document.getElementById('trendChartCanvas');
      if (!ctx || typeof Chart === 'undefined') return;

      new Chart(ctx, {
        type: 'line',
        data: {
          labels: dates,
          datasets: [
            {
              label: 'Process Adherence Rate',
              data: adherence,
              borderColor: '#2563eb',
              backgroundColor: 'rgba(37,99,235,0.15)',
              tension: 0.35,
              pointRadius: 4,
              pointHoverRadius: 5
            },
            {
              label: 'Call Resolution Rate',
              data: resolution,
              borderColor: '#10b981',
              backgroundColor: 'rgba(16,185,129,0.15)',
              tension: 0.35,
              pointRadius: 4,
              pointHoverRadius: 5
            },
            {
              label: 'CSAT Score',
              data: csat,
              borderColor: '#f59e0b',
              backgroundColor: 'rgba(245,158,11,0.15)',
              tension: 0.35,
              pointRadius: 4,
              pointHoverRadius: 5
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: (ctx) => `${ctx.dataset.label}: ${ctx.parsed.y}%`
              }
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              }
            },
            y: {
              beginAtZero: false,
              min: 28,
              max: 90,
              grid: {
                color: '#e5e7eb'
              },
              ticks: {
                callback: (v) => `${v}`
              }
            }
          }
        }
      });
    })();

    // CSAT × Outcome Diagnostic Matrix
    (function() {
      const scenarioData = {
        'positive-achieved-followed': {
          whyCSAT: 'Customers received clear, step-by-step guidance tailored to their specific Stanley product variant. Resolution was achieved on the first call, and agents confirmed successful usage, leaving customers confident in both the product and support experience.',
          contactingAbout: 'Lid alignment and sealing issues, first-time usage clarification',
          productTypes: 'Stanley Quencher H2.0 FlowState Tumblers, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Minimal improvement needed, though proactive tips for long-term care could further reduce repeat contacts.',
          contactCentreActions: [
            'Reinforce best-practice call flows',
            'Add post-resolution care tips to scripts',
            'Surface these calls as training exemplars'
          ],
          preventionActions: [
            'Include care instructions in product packaging',
            'Create self-service video guides for common lid issues',
            'Add product care tips to Stanley website'
          ]
        },
        'neutral-achieved-followed': {
          whyCSAT: 'Customers received correct resolution through proper SOP execution, but the interaction felt somewhat mechanical. While issues were resolved, customers did not feel fully reassured about long-term product reliability.',
          contactingAbout: 'Handle stability questions, seal wear concerns, replacement part inquiries',
          productTypes: 'Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers, older Stanley Master Series products',
          couldBeBetter: 'Agents could add more reassurance about product durability and provide clearer long-term care guidance.',
          contactCentreActions: [
            'Train agents on reassurance techniques',
            'Add durability messaging to call scripts',
            'Provide product care guidance resources'
          ],
          preventionActions: [
            'Create durability information on product pages',
            'Develop care guides for different Stanley models',
            'Add FAQ section addressing common wear concerns'
          ]
        },
        'negative-achieved-followed': {
          whyCSAT: 'Even when Stanley issues were resolved through correct SOP execution, customer satisfaction dropped when the interaction felt effort-heavy or overly procedural. Customers felt frustrated by the process despite successful resolution.',
          contactingAbout: 'Repeat lid leaks, seal wear due to daily usage, multiple troubleshooting attempts',
          productTypes: 'Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers, Stanley Master Series products',
          couldBeBetter: 'Agents should acknowledge customer effort and frustration earlier in the call, and explain why certain steps are necessary for Stanley products.',
          contactCentreActions: [
            'Train agents to acknowledge customer effort',
            'Add empathy checkpoints throughout SOPs',
            'Provide scripts that explain "why" behind each step'
          ],
          preventionActions: [
            'Update product documentation to explain common issues',
            'Create troubleshooting flowcharts for self-service',
            'Improve product design to reduce common failure points'
          ]
        },
        'positive-not_achieved-followed': {
          whyCSAT: 'Customers remained satisfied even without immediate resolution when agents clearly explained Stanley product limitations and next steps. Transparent communication about replacement eligibility and timelines preserved trust.',
          contactingAbout: 'Wear-related seal failures, handle attachment issues, replacement eligibility questions',
          productTypes: 'Stanley Classic Legendary Bottles, Stanley Master Series products, older Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Earlier identification of replacement-eligible issues could reduce call duration while maintaining satisfaction.',
          contactCentreActions: [
            'Create quick-reference guide for replacement eligibility',
            'Train agents to identify replacement scenarios faster',
            'Streamline replacement authorization process'
          ],
          preventionActions: [
            'Clarify warranty and replacement policies on website',
            'Create self-service replacement request portal',
            'Improve product durability to reduce wear-related failures'
          ]
        },
        'neutral-not_achieved-followed': {
          whyCSAT: 'Customers understood why resolution wasn\'t immediate, but felt uncertain about next steps. While agents followed SOPs correctly, clearer communication about timelines and follow-up processes would improve satisfaction.',
          contactingAbout: 'Complex handle repairs, custom replacement parts, warranty claim processing',
          productTypes: 'Stanley Master Series products, Stanley Classic Legendary Bottles, custom Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Agents could provide more specific timelines and clearer follow-up communication expectations.',
          contactCentreActions: [
            'Provide agents with accurate timeline estimates',
            'Set up automated follow-up communication',
            'Create clear escalation paths for complex cases'
          ],
          preventionActions: [
            'Improve parts availability and inventory management',
            'Create online warranty claim submission',
            'Develop faster replacement processing workflows'
          ]
        },
        'negative-not_achieved-followed': {
          whyCSAT: 'Although agents followed SOPs, recurring Stanley product wear issues were not resolved. Customers felt frustrated repeating steps they had already tried, leading to dissatisfaction despite proper process adherence.',
          contactingAbout: 'Repeat lid leaks, seal wear due to daily usage, persistent issues',
          productTypes: 'Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers, older Stanley Master Series products',
          couldBeBetter: 'Earlier escalation to replacement and acknowledgment of repeat contact history would improve outcomes.',
          contactCentreActions: [
            'Update SOPs to fast-track replacement after repeat failure',
            'Flag repeat callers automatically in CRM',
            'Improve replacement eligibility guidance for agents'
          ],
          preventionActions: [
            'Identify and address common product failure patterns',
            'Improve product durability testing',
            'Create proactive replacement program for known issues'
          ]
        },
        'positive-achieved-not_followed': {
          whyCSAT: 'Bypassing diagnostics and proactively offering replacements led to faster resolution and higher satisfaction for known Stanley product issues. Customers appreciated the efficiency and felt valued.',
          contactingAbout: 'Known lid defects, handle issues, replacement requests for common problems',
          productTypes: 'Stanley Quencher H2.0 FlowState Tumblers, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'While effective, this approach should be balanced with ensuring diagnostic steps are followed when necessary to prevent unnecessary replacements.',
          contactCentreActions: [
            'Document when proactive replacement is appropriate',
            'Create decision trees for replacement vs. troubleshooting',
            'Train agents on when to skip vs. follow diagnostics'
          ],
          preventionActions: [
            'Identify and fix known product defects proactively',
            'Create self-service replacement portal for common issues',
            'Improve quality control to reduce defect rates'
          ]
        },
        'neutral-achieved-not_followed': {
          whyCSAT: 'Issues were resolved quickly, but customers felt uncertain about whether the solution would last. Without structured explanation, confidence in product reliability was reduced.',
          contactingAbout: 'Quick lid adjustments, handle tightening, basic seal fixes',
          productTypes: 'Stanley Quencher H2.0 FlowState Tumblers, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Agents should explain what was done and why, even when skipping full diagnostics, to build customer confidence.',
          contactCentreActions: [
            'Require brief explanation even for quick fixes',
            'Add confirmation steps to all resolutions',
            'Train agents on building confidence through explanation'
          ],
          preventionActions: [
            'Create video guides showing common quick fixes',
            'Develop self-service troubleshooting tools',
            'Improve product design to reduce need for adjustments'
          ]
        },
        'negative-achieved-not_followed': {
          whyCSAT: 'Resolution without structured explanation reduced customer confidence in Stanley product reliability. Customers felt uncertain about what actually happened and whether the issue would recur.',
          contactingAbout: 'Lid leaks, seal issues, handle problems that were "fixed" but not explained',
          productTypes: 'Stanley Quencher H2.0 FlowState Tumblers, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Agents must explain the cause and confirm prevention of recurrence, even when resolution is quick.',
          contactCentreActions: [
            'Enforce explanation requirement for all resolutions',
            'Add structured wrap-up checklist',
            'Train agents on building confidence through clarity'
          ],
          preventionActions: [
            'Improve product reliability to reduce recurring issues',
            'Create clear product care instructions',
            'Develop better diagnostic tools for agents'
          ]
        },
        'positive-not_achieved-not_followed': {
          whyCSAT: 'Strong agent ownership and personal commitment preserved customer goodwill even when Stanley issues were unresolved. Customers responded positively to accountability and follow-through promises.',
          contactingAbout: 'Complex custom issues, rare product problems, cases requiring manufacturer escalation',
          productTypes: 'Stanley Master Series products, custom Stanley Classic Legendary Bottles, limited edition Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'While ownership is positive, agents should still follow basic diagnostic steps to ensure all options are explored.',
          contactCentreActions: [
            'Balance ownership with process adherence',
            'Create escalation paths that maintain ownership',
            'Train agents on when to escalate vs. continue troubleshooting'
          ],
          preventionActions: [
            'Improve product quality to reduce rare issues',
            'Create better escalation processes',
            'Develop specialized support for complex cases'
          ]
        },
        'neutral-not_achieved-not_followed': {
          whyCSAT: 'Customers appreciated agent effort and ownership, but felt uncertain about outcomes. Without clear process or resolution, satisfaction remained neutral despite positive agent behavior.',
          contactingAbout: 'Unusual product issues, compatibility questions, cases requiring research',
          productTypes: 'Stanley Master Series products, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Agents should combine ownership with structured follow-up and clear communication about next steps.',
          contactCentreActions: [
            'Create structured follow-up processes',
            'Provide agents with research resources',
            'Establish clear escalation timelines'
          ],
          preventionActions: [
            'Improve product documentation',
            'Create comprehensive FAQ database',
            'Develop better product compatibility guides'
          ]
        },
        'negative-not_achieved-not_followed': {
          whyCSAT: 'Calls without process adherence or resolution resulted in the poorest customer outcomes. Lack of structured guidance, missed diagnostics, and lack of ownership compounded frustration.',
          contactingAbout: 'Repeat calls about same issues, unresolved lid problems, handle failures, seal leaks',
          productTypes: 'Stanley Quencher H2.0 FlowState Tumblers, Stanley Classic Legendary Bottles, Stanley Adventure Quencher Travel Tumblers',
          couldBeBetter: 'Agents must follow basic diagnostic processes and take ownership of outcomes, even when resolution isn\'t immediate.',
          contactCentreActions: [
            'Enforce minimum diagnostic requirements',
            'Require ownership and follow-up commitments',
            'Provide intensive coaching on process adherence'
          ],
          preventionActions: [
            'Identify root causes of repeat contacts',
            'Improve product reliability',
            'Create better self-service options to reduce call volume'
          ]
        }
      };

      function getScenarioKey(csat, resolution, process) {
        return `${csat}-${resolution}-${process}`;
      }

      function renderDiagnostic(csat, resolution, process, percentageText) {
        const key = getScenarioKey(csat, resolution, process);
        const data = scenarioData[key];
        if (!data) return;

        const csatLabel = csat === 'positive' ? 'Positive' : csat === 'neutral' ? 'Neutral' : 'Negative';
        const resolutionLabel = resolution === 'achieved' ? 'Resolution Achieved' : 'Resolution Not Achieved';
        const processLabel = process === 'followed' ? 'Process Followed' : 'Process Not Followed';

        // Extract percentage from text (e.g., "18%" -> 18)
        const percentage = parseFloat(percentageText.replace('%', ''));
        
        // Total weekly calls (demo data)
        const totalWeeklyCalls = 1000;
        
        // Calculate number of calls in this bucket
        const callsInBucket = Math.round((percentage / 100) * totalWeeklyCalls);

        // Update modal title
        const modalTitle = document.getElementById('modalTitle');
        modalTitle.textContent = `Diagnostic Insights: ${csatLabel} CSAT | ${resolutionLabel} | ${processLabel}`;

        // Update diagnostic content with stats AND diagnostic questions
        const diagnosticSection = document.getElementById('diagnosticSection');
        diagnosticSection.innerHTML = `
          <div class="matrix-stats">
            <div class="stat-item">
              <p class="stat-label">Percentage</p>
              <p class="stat-value-large">${percentageText}</p>
            </div>
            <div class="stat-item">
              <p class="stat-label">Number of Calls in Bucket</p>
              <p class="stat-value-large">${callsInBucket.toLocaleString()}</p>
            </div>
            <div class="stat-item">
              <p class="stat-label">Total Weekly Calls</p>
              <p class="stat-value-large">${totalWeeklyCalls.toLocaleString()}</p>
            </div>
          </div>

          <div class="diagnostic-questions">
            <div class="diagnostic-question">
              <h4>1. Why is customer experience ${csatLabel} in this scenario?</h4>
              <div class="insight-block">
                <p>${data.whyCSAT}</p>
              </div>
            </div>

            <div class="diagnostic-question">
              <h4>2. What were customers contacting about?</h4>
              <div class="insight-block">
                <p><strong>Contact types:</strong> ${data.contactingAbout}</p>
                <p style="margin-top: 12px;"><strong>Stanley product types:</strong> ${data.productTypes}</p>
              </div>
            </div>

            <div class="diagnostic-question">
              <h4>3. What could have been done better to achieve a better customer outcome?</h4>
              <div class="insight-block">
                <p>${data.couldBeBetter}</p>
              </div>
            </div>

            <div class="diagnostic-question">
              <h4>4. What actions should be taken to improve and prevent these contacts in the future?</h4>
              <div class="insight-block">
                <p class="block-title">Contact-Centre Actions</p>
                <ul>
                  ${data.contactCentreActions.map(action => `<li>${action}</li>`).join('')}
                </ul>
                <p class="block-title" style="margin-top: 16px;">Prevention Actions</p>
                <ul>
                  ${data.preventionActions.map(action => `<li>${action}</li>`).join('')}
                </ul>
              </div>
            </div>
          </div>
        `;

        // Show modal
        const modal = document.getElementById('diagnosticModal');
        modal.style.display = 'flex';
      }

      // Add click handlers to matrix cells
      document.querySelectorAll('.matrix-cell[data-csat]').forEach(cell => {
        cell.addEventListener('click', function() {
          // Remove active class from all cells
          document.querySelectorAll('.matrix-cell').forEach(c => c.classList.remove('active'));
          
          // Add active class to clicked cell
          this.classList.add('active');
          
          // Get cell data
          const csat = this.dataset.csat;
          const resolution = this.dataset.resolution === 'achieved' ? 'achieved' : 'not_achieved';
          const process = this.dataset.process === 'followed' ? 'followed' : 'not_followed';
          
          // Get percentage from the cell
          const percentageElement = this.querySelector('.cell-percentage');
          const percentageText = percentageElement ? percentageElement.textContent : '0%';
          
          renderDiagnostic(csat, resolution, process, percentageText);
        });
      });

      // Close modal handlers
      const modal = document.getElementById('diagnosticModal');
      const closeBtn = document.getElementById('closeDiagnosticModal');

      closeBtn.addEventListener('click', function() {
        modal.style.display = 'none';
      });

      // Close modal when clicking outside
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          modal.style.display = 'none';
        }
      });

      // Close modal with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.style.display === 'flex') {
          modal.style.display = 'none';
        }
      });
    })();
  </script>
</body>
</html>

